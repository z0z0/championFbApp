(function(k){k.fn.digicharts=function(t){function J(){n=0;c=Math.floor(d.height/2);w&&(animator_div='<div class="animator" style=\'background:'+x+"'></div>",k(animator_div).insertBefore("#chart-"+p),k("#chart-"+p).siblings().animate({left:"100%"},2E3));a.fillStyle=x;a.fillRect(0,0,d.width,d.height);for(var b=d.height/y*0.32,h=0,f=0,g=0,l=0,m=d.width/e.values.length,q=0.5*m,g=0;g<e.values.length;g++){a.save();a.fillStyle=z[l];l++;l>=z.length&&(l=0);0<g&&(h+=m);var f=f+m,s=c+e.values[g]*b,r=c+e.values[g+
1]*b,t=c-e.values[g+1]*b,u=f-q;isNaN(e.values[g+1])&&(r=c+e.values[g]*b,t=c-e.values[g]*b,f-=5);var v=c-e.values[g]*b;a.beginPath();a.moveTo(h+5,s);a.lineTo(f,r);a.lineTo(f,t);a.lineTo(h+5,v);A&&(a.shadowColor="#000",a.shadowBlur=1,a.shadowOffsetX=1,a.shadowOffsetY=2);a.closePath();a.fill();a.shadowBlur=0;a.shadowOffsetX=0;a.shadowOffsetY=0;a.font=B+"px Arial";a.textAlign="center";a.fillStyle=C;a.fillText(e.percents[g].toFixed(1)+"%",u,1.03*c);a.fillStyle=K;a.fillText(e.titles[g],u,1.87*c);a.restore()}}
function D(){n=Math.floor(d.width/2);c=Math.floor(d.height/2);u=0.75*Math.min(n,c);a.fillStyle=x;a.fillRect(0,0,d.width,d.height);w?(q+=E,l+=r,Math.round(1E3*l)/1E3==Math.round(1E3*m)/1E3&&(l=m-r),Math.round(1E3*q)/1E3==Math.round(1E3*v)/1E3&&clearInterval(F)):(q=v,l=m-r);var b=q+E/100*360*Math.PI/180-1.5707;A&&(a.shadowColor="#000",a.shadowBlur=4,a.shadowOffsetX=1,a.shadowOffsetY=2);a.beginPath();a.moveTo(n,c);a.arc(n,c,u*s*0.1,-1.5707,b,!1);a.closePath();a.fillStyle=L;a.fill();a.restore();a.shadowBlur=
0;a.shadowOffsetX=0;a.shadowOffsetY=0;G||(a.beginPath(),a.moveTo(n,c),a.fillStyle=M,a.arc(n,c,0.8*u,-1.5707,2*Math.PI,!1),a.fill());a.font=" "+B+"px Arial";a.textAlign="center";a.fillStyle=C;a.fillText((l+r).toFixed(1)+"%",1.01*n,1.05*c)}function H(){k("<h2>Greska!</h2>").insertBefore("#chart-"+p)}var b=k.extend({mode:"",value:"",series:[],title:"",shadow:!1,color:"",textColor:"#ffcc00",textSize:28,legendColor:"#666",textFill:"#000000",seriesColors:"#19b59f, #ccc, #000",backgroundColor:"#fff",barPadding:10,
animation:!0},t),p=k(this).attr("id");t=k(this).width();for(var N=k(this).height(),d,a,n,c,u,O=b.mode,m=b.value,h=b.series,I=b.title,A=b.shadow,C=b.textColor,B=b.textSize,M=b.textFill,x=b.backgroundColor,s=b.barPadding,w=b.animation,K=b.legendColor,L=b.color,G=!1,z=b.seriesColors.split(","),e={titles:[],values:[],percents:[],valuesSum:""},f=0,b=0;b<h.length;b++)e.titles.push(h[b][0]),e.percents.push(h[b][2]),f+=h[b][1];e.valuesSum=f;for(var y=0,b=0;b<h.length;b++)f=100*h[b][1]/e.valuesSum,f>y&&(y=
f),e.values.push(f);var F;13<s?s=13:9>s&&(s=9);var v=m/100*360*Math.PI/180,E=v/60,q=0,r=m/60,l=0;k("#"+p).html('<div class="digi-chart"><canvas id="chart-'+p+'"></canvas></div>');d=k("#chart-"+p).get(0);d.width=t;d.height=N;"undefined"!=typeof G_vmlCanvasManager&&(d=G_vmlCanvasManager.initElement(d),w=!1,G=!0);d.getContext&&(a=d.getContext("2d"));if(0<m.length||0<h.length)switch(O){case "pie":w?F=setInterval(D,40):D();break;case "funnel":J();break;default:H()}else H();0<I.length&&k('<div class="chart-title"><h2>'+
I+"</h2></div>").insertBefore("#chart-"+p);return this}})(jQuery);